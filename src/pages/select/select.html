<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{mapName}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="card-background-page">
  <ion-fab bottom right>
    <button ion-fab (click)="openSubmitPage()"><ion-icon name="add"></ion-icon></button>
  </ion-fab>
  <ion-grid fixed>
    <div *ngIf="getRowVisibility('ct')">
      <ion-title class="list-title">
        CT Stuff
      </ion-title>
      <ion-row align-items-stretch *ngIf="getRowVisibility('ct')">
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center *ngFor="let strategy of map.ct" [class.isEmptyCol]="strategy.spots.length === 0">
          <ion-card class="card" (click)="openMapOverview(strategy.id, 'ct')">
            <div class="card-content">
              <img class="picture" src="/assets/img/{{strategy.picture}}"/>
              <div class="card-title">{{strategy.name}}</div>
              <div class="card-subtitle">{{strategy.spots.length}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>
    
    <div *ngIf="getRowVisibility('t')">
      <ion-title class="list-title" *ngIf="getRowVisibility('t')">
        T Stuff
      </ion-title>
      <ion-row align-items-stretch>
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center [class.isEmptyCol]="mapStatistics.t?.value === 0">
          <ion-card class="card" (click)="openMapOverview('t')">
            <div class="card-content">
              <img class="picture" src="/assets/img/{{strategy.picture}}"/>
              <div class="card-title">T Stuff</div>
              <div class="card-subtitle">{{mapStatistics.t.length}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>
    <div *ngIf="getRowVisibility('smoke')">
      <ion-title class="list-title" *ngIf="getRowVisibility('smoke')">
        Smokes
      </ion-title>
      <ion-row align-items-stretch *ngIf="getRowVisibility('smoke')">
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center [class.isEmptyCol]="mapStatistics.smoke?.value === 0">
          <ion-card class="card" (click)="openMapOverview('smoke')">
            <div class="card-content">
              <img class="picture" src="/assets/img/de_dust2/smoke_a.png" />
              <div class="card-title">Smoke</div>
              <div class="card-subtitle">{{mapStatistics.smoke.value}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>

    <div *ngIf="getRowVisibility('decoy')">
      <ion-title class="list-title" *ngIf="getRowVisibility('decoy')">
        Decoys
      </ion-title>
      <ion-row align-items-stretch *ngIf="getRowVisibility('decoy')">
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center [class.isEmptyCol]="mapStatistics.decoy?.value === 0">
          <ion-card class="card" (click)="openMapOverview('decoy')">
            <div class="card-content">
              <img class="picture" src="/assets/img/de_dust2/smoke_a.png" />
              <div class="card-title">Decoy</div>
              <div class="card-subtitle">{{mapStatistics.decoy.value}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>

    <div *ngIf="getRowVisibility('flash')">
      <ion-title class="list-title" *ngIf="getRowVisibility('flash')">
        Flashes
      </ion-title>
      <ion-row align-items-stretch *ngIf="getRowVisibility('flash')">
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center *ngFor="let strategy of map.flash" [class.isEmptyCol]="strategy.spots.length === 0">
          <ion-card (click)="openMapOverview('CT Positions')">
            <div class="card-content">
              <img class="picture" src="/assets/img/{{strategy.picture}}" />
              <div class="card-title">{{strategy.name}}</div>
              <div class="card-subtitle">{{strategy.spots.length}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>

    <div *ngIf="getRowVisibility('eco')">
      <ion-title class="list-title" *ngIf="getRowVisibility('eco')"> 
        Eco
      </ion-title>
      <ion-row align-items-stretch *ngIf="getRowVisibility('eco')">
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center *ngFor="let strategy of map.eco" [class.isEmptyCol]="strategy.spots.length === 0">
          <ion-card (click)="openMapOverview('CT Positions')">
            <div class="card-content">
              <img class="picture" src="/assets/img/{{strategy.picture}}" />
              <div class="card-title">{{strategy.name}}</div>
              <div class="card-subtitle">{{strategy.spots.length}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>

    <div *ngIf="getRowVisibility('teamtactics')">
      <ion-title class="list-title" *ngIf="getRowVisibility('teamtactics')">
        Team Tactics
      </ion-title>
      <ion-row align-items-stretch *ngIf="getRowVisibility('teamtactics')">
        <ion-col col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 align-self-stretch align-self-center *ngFor="let strategy of map.teamtactics" [class.isEmptyCol]="strategy.spots.length === 0">
          <ion-card (click)="openMapOverview('CT Positions')">
            <div class="card-content">
              <img class="picture" src="/assets/img/{{strategy.picture}}" />
              <div class="card-title">{{strategy.name}}</div>
              <div class="card-subtitle">{{strategy.spots.length}} Listings</div>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>
</ion-content>